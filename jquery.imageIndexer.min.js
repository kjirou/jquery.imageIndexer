!function(){var a=[].slice;!function(b){var c;if(null==b.imageIndexer)return b.imageIndexer=function(a){return c.getInstance(a)},b.imageIndexer._addShortcut=function(a){return this[a]=function(){var b;return b=c.getInstance(),b[a].apply(b,arguments)}},b.imageIndexer._addShortcut("clip"),b.imageIndexer._addShortcut("upload"),b.imageIndexer._addShortcut("partition"),b.imageIndexer.getClass=function(){return c},c=function(){function b(){this._indexes={}}return b._instances={},b.getInstance=function(a){return null==a&&(a="default"),a in this._instances?this._instances[a]:this._instances[a]=new b},b.cleanInstances=function(){return this._instances={}},b.prototype.clip=function(a){if(this._hasIndex(a))throw new Error("The imageKey="+a+" already exists.")},b.prototype.upload=function(a,b,c){return this.clip(a,b,c,[0,0],c.slice())},b.prototype.partition=function(a,b,c,d,e){var f,g,h;if(null==e&&(e={}),this._hasIndex(a))throw new Error("The imageKey="+a+" already exists.");if(f=_.extend({targetPos:[0,0],targetSize:c.slice()},e),g=f.targetPos.slice(),h=f.targetSize.slice(),!this._withinSize(c,g,h))throw new Error("Pos="+g+", size="+h+" is not within "+c+".");if(!this._isEqualDevidable(h,d))throw new Error("Size="+h+" can't be devide equally by "+d+".");return this._indexes[a]={type:"partition",url:b,fullSize:c,partSize:d,targetPos:g,targetSize:h}},b.prototype._getIndex=function(a){var b,c;return null!=(b=null!=(c=this._indexes)?c[a]:void 0)?b:null},b.prototype._hasIndex=function(a){return null!==this._getIndex(a)},b.prototype._withinSize=function(a,b,c){return a[0]>=b[1]+c[0]&&a[1]>=b[0]+c[1]},b.prototype._isEqualDevidable=function(a,b){return 0===a[0]%b[0]&&0===a[1]%b[1]},b.prototype.asChip=function(){var b,c;b=arguments[0],c=2<=arguments.length?a.call(arguments,1):[]},b.prototype.setAlias=function(){var b,c,d;b=arguments[0],c=arguments[1],d=3<=arguments.length?a.call(arguments,2):[]},b}()}(jQuery)}.call(this);